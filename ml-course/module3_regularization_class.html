<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 3: Healthcare Feature Crisis - Interactive Class | Chenhao Zhou</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: Georgia, serif; 
            background: #0a1929; 
            color: #fff; 
            overflow-x: hidden;
        }
        
        .hero-section {
            min-height: 100vh;
            background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            padding: 2rem;
            position: relative;
        }
        
        .hero-title {
            font-size: 3.5rem;
            margin-bottom: 1rem;
            animation: fadeInUp 1s ease;
        }
        
        .hero-subtitle {
            font-size: 1.4rem;
            margin-bottom: 2rem;
            opacity: 0.9;
            animation: fadeInUp 1s ease 0.3s both;
        }
        
        .crisis-value {
            font-size: 3rem;
            color: #ffd700;
            font-weight: bold;
            animation: pulse 2s infinite;
        }
        
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        .section {
            padding: 4rem 2rem;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .dark-section {
            background: #0a1929;
        }
        
        .light-section {
            background: #132f4c;
        }
        
        .story-card {
            background: rgba(255, 255, 255, 0.08);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .interactive-panel {
            background: linear-gradient(135deg, rgba(67, 206, 162, 0.1) 0%, rgba(24, 90, 157, 0.1) 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            border: 2px solid rgba(67, 206, 162, 0.5);
        }
        
        .button {
            background: linear-gradient(135deg, #43cea2 0%, #185a9d 100%);
            color: white;
            border: none;
            padding: 1rem 2rem;
            font-size: 1.1rem;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin: 0.5rem;
            display: inline-block;
            text-decoration: none;
            font-weight: bold;
        }
        
        .button:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(67, 206, 162, 0.5);
        }
        
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            gap: 0.5rem;
            margin: 2rem 0;
            max-height: 400px;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
        }
        
        .feature-box {
            background: rgba(255, 255, 255, 0.1);
            padding: 0.5rem;
            border-radius: 5px;
            text-align: center;
            font-size: 0.8rem;
            transition: all 0.3s ease;
            cursor: pointer;
            border: 2px solid transparent;
        }
        
        .feature-box.selected {
            background: rgba(67, 206, 162, 0.3);
            border-color: #43cea2;
            transform: scale(1.1);
        }
        
        .feature-box.eliminated {
            opacity: 0.3;
            background: rgba(220, 53, 69, 0.2);
            transform: scale(0.9);
        }
        
        .metric-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 1.5rem;
            border-radius: 10px;
            text-align: center;
            margin: 1rem;
            transition: transform 0.3s ease;
        }
        
        .metric-card:hover {
            transform: scale(1.05);
        }
        
        .metric-value {
            font-size: 2.5rem;
            color: #43cea2;
            font-weight: bold;
        }
        
        .metric-label {
            font-size: 1rem;
            opacity: 0.8;
            margin-top: 0.5rem;
        }
        
        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
            margin: 2rem 0;
        }
        
        .slider-container {
            margin: 2rem 0;
        }
        
        .slider {
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.2);
            outline: none;
            -webkit-appearance: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #43cea2;
            cursor: pointer;
        }
        
        .slider::-moz-range-thumb {
            width: 25px;
            height: 25px;
            border-radius: 50%;
            background: #43cea2;
            cursor: pointer;
        }
        
        .learning-curve {
            width: 100%;
            height: 300px;
            margin: 2rem 0;
            position: relative;
        }
        
        #learningCanvas {
            width: 100%;
            height: 100%;
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
        }
        
        .alert-box {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
        }
        
        .success-box {
            background: rgba(40, 167, 69, 0.2);
            border: 2px solid #28a745;
            padding: 1.5rem;
            border-radius: 10px;
            margin: 2rem 0;
            display: none;
        }
        
        .quiz-option {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            margin: 0.5rem 0;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }
        
        .quiz-option:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateX(10px);
        }
        
        .quiz-option.correct {
            background: rgba(40, 167, 69, 0.3);
            border-color: #28a745;
        }
        
        .quiz-option.incorrect {
            background: rgba(220, 53, 69, 0.3);
            border-color: #dc3545;
        }
        
        .regularization-display {
            font-size: 1.5rem;
            color: #ffd700;
            text-align: center;
            margin: 1rem 0;
        }
        
        .nav-buttons {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1000;
        }
        
        .nav-button {
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 0.5rem 1rem;
            margin: 0 0.5rem;
            border-radius: 20px;
            text-decoration: none;
            backdrop-filter: blur(10px);
        }
        
        h2 {
            font-size: 2.5rem;
            margin-bottom: 1.5rem;
            color: #43cea2;
        }
        
        .coefficient-bar {
            display: flex;
            align-items: center;
            margin: 0.5rem 0;
        }
        
        .coefficient-label {
            width: 150px;
            font-size: 0.9rem;
        }
        
        .coefficient-value {
            flex: 1;
            height: 20px;
            background: linear-gradient(90deg, #43cea2 0%, #185a9d 100%);
            border-radius: 10px;
            transition: width 0.5s ease;
        }
        
        .decision-point {
            background: linear-gradient(135deg, rgba(255, 193, 7, 0.1) 0%, rgba(255, 87, 34, 0.1) 100%);
            padding: 2rem;
            border-radius: 15px;
            margin: 2rem 0;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="nav-buttons">
        <a href="class-notes.html" class="nav-button">üìö Notes</a>
        <a href="lab-manual.html" class="nav-button">üî¨ Lab</a>
        <a href="../module-04-tree-methods/class-material.html" class="nav-button">Next ‚Üí</a>
    </div>

    <!-- Hero Section -->
    <div class="hero-section">
        <h1 class="hero-title">üè• The 2,000-Feature Nightmare</h1>
        <p class="hero-subtitle">MedTech Analytics faces a data complexity crisis</p>
        <div class="crisis-value">$30 Million at Risk</div>
        <button class="button" onclick="startJourney()">Accept Mission</button>
    </div>

    <!-- Story Introduction -->
    <div class="section dark-section" id="storySection" style="display: none;">
        <div class="story-card">
            <h2>üö® Emergency at MedTech Analytics</h2>
            <p style="font-size: 1.2rem; line-height: 1.8;">
                You're the Chief Data Scientist at MedTech Analytics, a company providing predictive 
                models to 500+ hospitals nationwide. Your team just received data from a new electronic 
                health record system with 2,000 features per patient.
            </p>
            <br>
            <p style="font-size: 1.2rem; line-height: 1.8;">
                The CEO storms in: "Our model is failing! It's overfitting terribly - 99% accuracy on 
                training data but only 52% on new patients. Three major hospital chains are threatening 
                to cancel their $30 million contracts!"
            </p>
            <br>
            <div class="alert-box">
                <strong>‚ö†Ô∏è The Challenge:</strong> You have 2,000 features but only 5,000 patient records. 
                Classic curse of dimensionality! You need to identify the truly important features and 
                prevent overfitting - fast!
            </div>
            <button class="button" onclick="showFeatureChaos()">Examine the Data</button>
        </div>
    </div>

    <!-- Feature Chaos Visualization -->
    <div class="section light-section" id="chaosSection" style="display: none;">
        <h2>üò± Feature Explosion Visualization</h2>
        
        <div class="interactive-panel">
            <h3>Your Current Feature Set (Scroll to See All 2,000!)</h3>
            <div class="feature-grid" id="featureGrid">
                <!-- Features will be generated dynamically -->
            </div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">2,000</div>
                    <div class="metric-label">Total Features</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">5,000</div>
                    <div class="metric-label">Training Samples</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">0.4</div>
                    <div class="metric-label">Samples per Feature</div>
                </div>
            </div>
            
            <div class="quiz-container">
                <h3>Quick Decision:</h3>
                <p>What's the main problem with having too many features?</p>
                <div class="quiz-option" onclick="checkAnswer(this, false)">
                    A) It takes longer to compute
                </div>
                <div class="quiz-option" onclick="checkAnswer(this, true)">
                    B) Model memorizes training data instead of learning patterns
                </div>
                <div class="quiz-option" onclick="checkAnswer(this, false)">
                    C) Features might be correlated
                </div>
            </div>
        </div>
        
        <button class="button" onclick="showRegularizationSolution()" id="continueBtn" style="display: none;">
            Discover Regularization
        </button>
    </div>

    <!-- L1 Regularization (Lasso) -->
    <div class="section dark-section" id="lassoSection" style="display: none;">
        <h2>üéØ L1 Regularization: The Feature Assassin</h2>
        
        <div class="interactive-panel">
            <h3>Watch Features Disappear with Lasso</h3>
            <p>Adjust the L1 penalty (Œª) and see features get eliminated:</p>
            
            <div class="slider-container">
                <label>L1 Penalty (Œª): <span id="l1Value">0.00</span></label>
                <input type="range" class="slider" id="l1Slider" min="0" max="2" step="0.01" value="0" 
                       oninput="updateL1(this.value)">
            </div>
            
            <div class="regularization-display">
                Active Features: <span id="activeFeatures">2000</span> / 2000
            </div>
            
            <div id="coefficientBars">
                <div class="coefficient-bar">
                    <span class="coefficient-label">Blood Pressure</span>
                    <div class="coefficient-value" style="width: 80%;" data-original="80"></div>
                </div>
                <div class="coefficient-bar">
                    <span class="coefficient-label">Glucose Level</span>
                    <div class="coefficient-value" style="width: 75%;" data-original="75"></div>
                </div>
                <div class="coefficient-bar">
                    <span class="coefficient-label">Age</span>
                    <div class="coefficient-value" style="width: 70%;" data-original="70"></div>
                </div>
                <div class="coefficient-bar">
                    <span class="coefficient-label">Random Feature 47</span>
                    <div class="coefficient-value" style="width: 20%;" data-original="20"></div>
                </div>
                <div class="coefficient-bar">
                    <span class="coefficient-label">Noise Variable</span>
                    <div class="coefficient-value" style="width: 15%;" data-original="15"></div>
                </div>
            </div>
            
            <p style="margin-top: 2rem;">L1 drives weak coefficients to exactly zero, performing automatic feature selection!</p>
        </div>
        
        <button class="button" onclick="showL2Comparison()">Compare with L2 (Ridge)</button>
    </div>

    <!-- L2 vs L1 Comparison -->
    <div class="section light-section" id="comparisonSection" style="display: none;">
        <h2>‚öñÔ∏è L1 vs L2: Different Strategies</h2>
        
        <div class="interactive-panel">
            <h3>See How Each Regularization Method Works</h3>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
                <div>
                    <h4>L1 (Lasso) - Feature Elimination</h4>
                    <div class="slider-container">
                        <label>L1 Strength: <span id="l1CompValue">0.5</span></label>
                        <input type="range" class="slider" min="0" max="1" step="0.1" value="0.5" 
                               oninput="compareRegularization('l1', this.value)">
                    </div>
                    <div id="l1Features" class="metric-card">
                        <div class="metric-value">47</div>
                        <div class="metric-label">Features Selected</div>
                    </div>
                </div>
                
                <div>
                    <h4>L2 (Ridge) - Feature Shrinkage</h4>
                    <div class="slider-container">
                        <label>L2 Strength: <span id="l2CompValue">0.5</span></label>
                        <input type="range" class="slider" min="0" max="1" step="0.1" value="0.5" 
                               oninput="compareRegularization('l2', this.value)">
                    </div>
                    <div id="l2Features" class="metric-card">
                        <div class="metric-value">2000</div>
                        <div class="metric-label">Features Kept (Shrunk)</div>
                    </div>
                </div>
            </div>
            
            <canvas id="comparisonCanvas" width="800" height="300" style="width: 100%; max-width: 800px; margin: 2rem auto; display: block;"></canvas>
        </div>
        
        <button class="button" onclick="showElasticNet()">Combine Both: Elastic Net</button>
    </div>

    <!-- Elastic Net -->
    <div class="section dark-section" id="elasticSection" style="display: none;">
        <h2>üîÆ Elastic Net: Best of Both Worlds</h2>
        
        <div class="interactive-panel">
            <h3>Fine-tune Your Regularization Mix</h3>
            
            <div class="slider-container">
                <label>L1 Ratio (0=Ridge, 1=Lasso): <span id="alphaValue">0.5</span></label>
                <input type="range" class="slider" id="alphaSlider" min="0" max="1" step="0.05" value="0.5" 
                       oninput="updateElasticNet(this.value)">
            </div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="selectedFeatures">156</div>
                    <div class="metric-label">Features Selected</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="modelComplexity">Medium</div>
                    <div class="metric-label">Model Complexity</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="generalization">Good</div>
                    <div class="metric-label">Generalization</div>
                </div>
            </div>
            
            <div class="alert-box">
                <strong>üí° Key Insight:</strong> Elastic Net combines L1's feature selection with L2's 
                stability. Perfect for high-dimensional medical data where features are often correlated!
            </div>
        </div>
        
        <button class="button" onclick="showCrossValidation()">Validate Your Model</button>
    </div>

    <!-- Cross-Validation -->
    <div class="section light-section" id="cvSection" style="display: none;">
        <h2>üîÑ Cross-Validation: Trust but Verify</h2>
        
        <div class="interactive-panel">
            <h3>Choose Your Validation Strategy</h3>
            
            <div class="slider-container">
                <label>Number of Folds (K): <span id="kValue">5</span></label>
                <input type="range" class="slider" min="2" max="10" step="1" value="5" 
                       oninput="updateCrossValidation(this.value)">
            </div>
            
            <div id="cvVisualization" style="margin: 2rem 0;">
                <!-- CV fold visualization will be here -->
            </div>
            
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value" id="cvScore">87.3%</div>
                    <div class="metric-label">CV Accuracy</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="cvStd">¬±2.1%</div>
                    <div class="metric-label">Standard Deviation</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value" id="trainTime">4.2s</div>
                    <div class="metric-label">Training Time</div>
                </div>
            </div>
            
            <button class="button" onclick="runFullValidation()">Run Complete Validation</button>
            <div id="validationResults" style="display: none; margin-top: 2rem;"></div>
        </div>
        
        <button class="button" onclick="showLearningCurves()">Analyze Learning Curves</button>
    </div>

    <!-- Learning Curves -->
    <div class="section dark-section" id="learningSection" style="display: none;">
        <h2>üìà Learning Curves: Diagnose Your Model</h2>
        
        <div class="interactive-panel">
            <h3>Identify Overfitting vs Underfitting</h3>
            
            <div class="slider-container">
                <label>Regularization Strength: <span id="regStrength">0.1</span></label>
                <input type="range" class="slider" min="0" max="2" step="0.1" value="0.1" 
                       oninput="updateLearningCurve(this.value)">
            </div>
            
            <div class="learning-curve">
                <canvas id="learningCanvas"></canvas>
            </div>
            
            <div id="diagnosisBox" class="alert-box">
                <strong>Diagnosis:</strong> <span id="diagnosis">Slight overfitting detected</span>
                <br>
                <strong>Recommendation:</strong> <span id="recommendation">Increase regularization</span>
            </div>
        </div>
        
        <button class="button" onclick="showFinalResults()">Apply Optimal Solution</button>
    </div>

    <!-- Final Results -->
    <div class="section light-section" id="resultsSection" style="display: none;">
        <h2>üèÜ Mission Complete: Model Saved!</h2>
        
        <div class="success-box" id="successBox">
            <h3>Your Regularized Model Results:</h3>
            <div class="metrics-grid">
                <div class="metric-card">
                    <div class="metric-value">88%</div>
                    <div class="metric-label">Test Accuracy</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">47</div>
                    <div class="metric-label">Features Used</div>
                </div>
                <div class="metric-card">
                    <div class="metric-value">$27M</div>
                    <div class="metric-label">Contracts Saved</div>
                </div>
            </div>
        </div>
        
        <div class="decision-point">
            <h3>üìä Executive Summary for MedTech Board</h3>
            
            <div style="text-align: left; margin: 2rem 0;">
                <h4>Solution Implemented:</h4>
                <ul style="line-height: 2;">
                    <li>‚úÖ Reduced features from 2,000 to 47 using L1 regularization</li>
                    <li>‚úÖ Applied Elastic Net with Œ±=0.7 for optimal performance</li>
                    <li>‚úÖ Validated with 10-fold cross-validation</li>
                    <li>‚úÖ Achieved 88% accuracy on holdout test set</li>
                    <li>‚úÖ Model now generalizes to new hospitals successfully</li>
                </ul>
            </div>
            
            <div class="alert-box">
                <strong>üí∞ Financial Impact:</strong> 
                <ul style="text-align: left; margin-top: 1rem;">
                    <li>Retained $30M in contracts</li>
                    <li>Reduced data collection costs by $2M annually (fewer features needed)</li>
                    <li>Improved prediction speed by 98% (47 vs 2,000 features)</li>
                    <li>Enabled deployment to resource-constrained hospitals</li>
                </ul>
            </div>
            
            <div style="margin-top: 2rem;">
                <h4>Key Features Identified as Critical:</h4>
                <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; margin-top: 1rem;">
                    <div class="feature-box selected">Blood Pressure</div>
                    <div class="feature-box selected">Glucose Level</div>
                    <div class="feature-box selected">Age</div>
                    <div class="feature-box selected">BMI</div>
                    <div class="feature-box selected">Prior Conditions</div>
                    <div class="feature-box selected">Medication Count</div>
                </div>
            </div>
        </div>
        
        <button class="button" onclick="downloadReport()">Download Technical Report</button>
        <button class="button" onclick="location.href='lab-manual.html'">Proceed to Lab ‚Üí</button>
    </div>

    <script>
        let selectedFeatureCount = 2000;
        let correctAnswers = 0;
        
        function startJourney() {
            document.querySelector('.hero-section').style.display = 'none';
            document.getElementById('storySection').style.display = 'block';
            window.scrollTo(0, 0);
        }
        
        function showFeatureChaos() {
            document.getElementById('chaosSection').style.display = 'block';
            generateFeatureGrid();
            document.getElementById('chaosSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function generateFeatureGrid() {
            const grid = document.getElementById('featureGrid');
            const features = [
                'Age', 'Gender', 'BMI', 'Blood_Pressure', 'Heart_Rate', 'Glucose', 'Cholesterol',
                'Hemoglobin', 'Platelet_Count', 'WBC_Count', 'RBC_Count', 'Creatinine', 'BUN',
                'Sodium', 'Potassium', 'Chloride', 'CO2', 'Calcium', 'Protein', 'Albumin'
            ];
            
            // Generate 2000 features
            for (let i = 0; i < 2000; i++) {
                const featureBox = document.createElement('div');
                featureBox.className = 'feature-box';
                if (i < 20) {
                    featureBox.textContent = features[i] || `Feature_${i}`;
                } else {
                    featureBox.textContent = `Var_${i}`;
                }
                featureBox.onclick = () => toggleFeature(featureBox);
                grid.appendChild(featureBox);
            }
        }
        
        function toggleFeature(element) {
            element.classList.toggle('selected');
        }
        
        function checkAnswer(element, isCorrect) {
            const options = document.querySelectorAll('.quiz-option');
            options.forEach(opt => {
                opt.classList.remove('correct', 'incorrect');
                opt.onclick = null;
            });
            
            if (isCorrect) {
                element.classList.add('correct');
                correctAnswers++;
                document.getElementById('continueBtn').style.display = 'inline-block';
            } else {
                element.classList.add('incorrect');
                setTimeout(() => {
                    alert('Think about what happens when a model has too many parameters relative to training samples');
                }, 500);
            }
        }
        
        function showRegularizationSolution() {
            document.getElementById('lassoSection').style.display = 'block';
            document.getElementById('lassoSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateL1(lambda) {
            document.getElementById('l1Value').textContent = parseFloat(lambda).toFixed(2);
            
            const bars = document.querySelectorAll('.coefficient-value');
            let activeCount = 0;
            
            bars.forEach(bar => {
                const original = parseFloat(bar.getAttribute('data-original'));
                const newWidth = Math.max(0, original - (lambda * 40));
                bar.style.width = newWidth + '%';
                
                if (newWidth > 0) activeCount++;
            });
            
            // Update feature count
            const totalActive = Math.max(20, Math.floor(2000 * Math.exp(-lambda * 2)));
            document.getElementById('activeFeatures').textContent = totalActive;
            
            // Eliminate features in grid
            const features = document.querySelectorAll('.feature-box');
            const eliminateCount = Math.floor(lambda * 1000);
            features.forEach((feature, index) => {
                if (index > 20 && index < 20 + eliminateCount) {
                    feature.classList.add('eliminated');
                } else {
                    feature.classList.remove('eliminated');
                }
            });
        }
        
        function showL2Comparison() {
            document.getElementById('comparisonSection').style.display = 'block';
            document.getElementById('comparisonSection').scrollIntoView({ behavior: 'smooth' });
            drawComparisonChart();
        }
        
        function compareRegularization(type, value) {
            if (type === 'l1') {
                document.getElementById('l1CompValue').textContent = value;
                const selected = Math.max(20, Math.floor(2000 * (1 - value)));
                document.querySelector('#l1Features .metric-value').textContent = selected;
            } else {
                document.getElementById('l2CompValue').textContent = value;
            }
            drawComparisonChart();
        }
        
        function drawComparisonChart() {
            const canvas = document.getElementById('comparisonCanvas');
            const ctx = canvas.getContext('2d');
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, 250);
            ctx.lineTo(750, 250);
            ctx.moveTo(50, 50);
            ctx.lineTo(50, 250);
            ctx.stroke();
            
            // Draw L1 coefficients (sparse)
            ctx.fillStyle = '#43cea2';
            for (let i = 0; i < 10; i++) {
                const height = i < 3 ? 150 : (Math.random() < 0.3 ? 50 : 0);
                ctx.fillRect(100 + i * 30, 250 - height, 20, height);
            }
            
            // Draw L2 coefficients (shrunk)
            ctx.fillStyle = '#185a9d';
            for (let i = 0; i < 10; i++) {
                const height = 80 - i * 5;
                ctx.fillRect(450 + i * 30, 250 - height, 20, height);
            }
            
            // Labels
            ctx.fillStyle = '#fff';
            ctx.font = '14px Arial';
            ctx.fillText('L1 (Sparse)', 180, 30);
            ctx.fillText('L2 (Shrunk)', 530, 30);
        }
        
        function showElasticNet() {
            document.getElementById('elasticSection').style.display = 'block';
            document.getElementById('elasticSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function updateElasticNet(alpha) {
            document.getElementById('alphaValue').textContent = alpha;
            
            const selected = Math.floor(200 - alpha * 150 + Math.random() * 20);
            document.getElementById('selectedFeatures').textContent = selected;
            
            if (alpha < 0.3) {
                document.getElementById('modelComplexity').textContent = 'High';
                document.getElementById('generalization').textContent = 'Poor';
            } else if (alpha < 0.7) {
                document.getElementById('modelComplexity').textContent = 'Medium';
                document.getElementById('generalization').textContent = 'Good';
            } else {
                document.getElementById('modelComplexity').textContent = 'Low';
                document.getElementById('generalization').textContent = 'Excellent';
            }
        }
        
        function showCrossValidation() {
            document.getElementById('cvSection').style.display = 'block';
            document.getElementById('cvSection').scrollIntoView({ behavior: 'smooth' });
            updateCrossValidation(5);
        }
        
        function updateCrossValidation(k) {
            document.getElementById('kValue').textContent = k;
            
            // Update metrics based on k
            const accuracy = 85 + Math.random() * 5;
            const std = 5 / Math.sqrt(k);
            const time = k * 0.8 + Math.random();
            
            document.getElementById('cvScore').textContent = accuracy.toFixed(1) + '%';
            document.getElementById('cvStd').textContent = '¬±' + std.toFixed(1) + '%';
            document.getElementById('trainTime').textContent = time.toFixed(1) + 's';
            
            // Visualize CV folds
            const viz = document.getElementById('cvVisualization');
            viz.innerHTML = '<h4>Cross-Validation Folds:</h4>';
            for (let i = 0; i < k; i++) {
                viz.innerHTML += `<div style="background: ${i === 0 ? '#43cea2' : 'rgba(255,255,255,0.1)'}; 
                                  padding: 0.5rem; margin: 0.2rem; display: inline-block; 
                                  border-radius: 5px;">Fold ${i + 1}</div>`;
            }
        }
        
        function runFullValidation() {
            const results = document.getElementById('validationResults');
            results.style.display = 'block';
            results.innerHTML = `
                <div class="alert-box" style="background: rgba(40, 167, 69, 0.2); border-color: #28a745;">
                    <h4>‚úÖ Validation Complete!</h4>
                    <p>Tested 50 different regularization parameters</p>
                    <p>Optimal Œª = 0.73</p>
                    <p>Best CV Score: 88.2% ¬± 1.8%</p>
                    <p>Features selected: 47 / 2000</p>
                </div>
            `;
        }
        
        function showLearningCurves() {
            document.getElementById('learningSection').style.display = 'block';
            document.getElementById('learningSection').scrollIntoView({ behavior: 'smooth' });
            updateLearningCurve(0.1);
        }
        
        function updateLearningCurve(strength) {
            document.getElementById('regStrength').textContent = strength;
            
            const canvas = document.getElementById('learningCanvas');
            const ctx = canvas.getContext('2d');
            canvas.width = canvas.offsetWidth;
            canvas.height = 300;
            
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Draw axes
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.beginPath();
            ctx.moveTo(50, 250);
            ctx.lineTo(canvas.width - 50, 250);
            ctx.moveTo(50, 50);
            ctx.lineTo(50, 250);
            ctx.stroke();
            
            // Draw training curve
            ctx.strokeStyle = '#43cea2';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = 0; x <= 100; x++) {
                const y = 250 - (180 - 50 * Math.exp(-x / 20) * (1 - strength));
                if (x === 0) ctx.moveTo(50, y);
                else ctx.lineTo(50 + x * (canvas.width - 100) / 100, y);
            }
            ctx.stroke();
            
            // Draw validation curve
            ctx.strokeStyle = '#ffd700';
            ctx.lineWidth = 3;
            ctx.beginPath();
            for (let x = 0; x <= 100; x++) {
                const gap = 30 * (1 - strength) + 10 * Math.sin(x / 10);
                const y = 250 - (150 - 30 * Math.exp(-x / 25)) + gap;
                if (x === 0) ctx.moveTo(50, y);
                else ctx.lineTo(50 + x * (canvas.width - 100) / 100, y);
            }
            ctx.stroke();
            
            // Legend
            ctx.fillStyle = '#43cea2';
            ctx.fillRect(100, 20, 20, 10);
            ctx.fillStyle = '#fff';
            ctx.font = '12px Arial';
            ctx.fillText('Training', 125, 30);
            
            ctx.fillStyle = '#ffd700';
            ctx.fillRect(200, 20, 20, 10);
            ctx.fillStyle = '#fff';
            ctx.fillText('Validation', 225, 30);
            
            // Update diagnosis
            if (strength < 0.5) {
                document.getElementById('diagnosis').textContent = 'Overfitting detected';
                document.getElementById('recommendation').textContent = 'Increase regularization strength';
            } else if (strength > 1.5) {
                document.getElementById('diagnosis').textContent = 'Underfitting detected';
                document.getElementById('recommendation').textContent = 'Decrease regularization strength';
            } else {
                document.getElementById('diagnosis').textContent = 'Good balance achieved';
                document.getElementById('recommendation').textContent = 'Current settings are optimal';
            }
        }
        
        function showFinalResults() {
            document.getElementById('resultsSection').style.display = 'block';
            document.getElementById('successBox').style.display = 'block';
            document.getElementById('resultsSection').scrollIntoView({ behavior: 'smooth' });
        }
        
        function downloadReport() {
            alert('Technical report generated! In production, this would download a comprehensive PDF with:\n' +
                  '‚Ä¢ Feature importance rankings\n‚Ä¢ Regularization path analysis\n‚Ä¢ Cross-validation results\n' +
                  '‚Ä¢ Learning curves\n‚Ä¢ Implementation code');
        }
    </script>
</body>
</html>
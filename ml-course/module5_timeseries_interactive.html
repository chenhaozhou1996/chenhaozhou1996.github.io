<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ML Module 5: Time Series Forecasting - Master the Black Friday Surge | ÊéåÊéßÈªëËâ≤ÊòüÊúü‰∫î</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.29.4/moment.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: #0a0e27;
            color: #1e293b;
            overflow-x: hidden;
            position: relative;
        }
        
        /* Time Stream Background */
        .time-stream {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(180deg, #0a0e27 0%, #1e3a8a 50%, #0a0e27 100%);
            z-index: -2;
        }
        
        .time-lines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }
        
        .time-line {
            position: absolute;
            height: 1px;
            width: 100%;
            background: linear-gradient(90deg, transparent 0%, rgba(59, 130, 246, 0.5) 50%, transparent 100%);
            animation: timeFlow 3s infinite linear;
        }
        
        @keyframes timeFlow {
            from { transform: translateX(-100%); }
            to { transform: translateX(100%); }
        }
        
        /* Loading Screen */
        .loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1e40af 0%, #7c3aed 100%);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 10000;
            transition: opacity 0.5s, visibility 0.5s;
        }
        
        .loading-screen.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .clock-loader {
            width: 100px;
            height: 100px;
            border: 3px solid rgba(255,255,255,0.2);
            border-radius: 50%;
            position: relative;
        }
        
        .clock-hand {
            position: absolute;
            background: white;
            transform-origin: bottom center;
        }
        
        .hour-hand {
            width: 4px;
            height: 30px;
            top: 20px;
            left: 48px;
            animation: rotate 4s infinite linear;
        }
        
        .minute-hand {
            width: 2px;
            height: 40px;
            top: 10px;
            left: 49px;
            animation: rotate 2s infinite linear;
        }
        
        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }
        
        /* Navigation */
        .nav-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(10, 14, 39, 0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            padding: 15px 30px;
            border-bottom: 1px solid rgba(59, 130, 246, 0.3);
        }
        
        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .nav-title {
            font-size: 1.3em;
            font-weight: bold;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .time-display {
            background: rgba(59, 130, 246, 0.2);
            padding: 5px 15px;
            border-radius: 20px;
            color: #60a5fa;
            font-size: 0.9em;
            font-weight: 600;
            margin-left: 20px;
        }
        
        .progress-container {
            flex: 1;
            max-width: 400px;
            margin: 0 30px;
        }
        
        .progress-bar {
            background: rgba(59, 130, 246, 0.2);
            height: 8px;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
            width: 0%;
            transition: width 0.5s ease;
            box-shadow: 0 0 20px rgba(59, 130, 246, 0.5);
        }
        
        /* Chapter Container */
        .chapter {
            display: none;
            padding-top: 80px;
            min-height: 100vh;
            animation: fadeIn 0.5s;
        }
        
        .chapter.active {
            display: block;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* Hero Section */
        .hero-section {
            background: linear-gradient(135deg, #1e40af 0%, #7c3aed 100%);
            color: white;
            padding: 80px 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .hero-section::before {
            content: '';
            position: absolute;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><text y="50" font-size="100" fill="rgba(255,255,255,0.03)">‚è∞</text></svg>');
            animation: drift 20s infinite linear;
        }
        
        @keyframes drift {
            from { transform: translate(-50%, -50%) rotate(0deg); }
            to { transform: translate(-50%, -50%) rotate(360deg); }
        }
        
        .hero-title {
            font-size: 3.5em;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
            animation: pulse 2s ease-in-out infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        
        .countdown-timer {
            font-size: 2em;
            margin: 20px 0;
            padding: 20px;
            background: rgba(0,0,0,0.2);
            border-radius: 10px;
            display: inline-block;
        }
        
        .countdown-digit {
            display: inline-block;
            background: rgba(255,255,255,0.1);
            padding: 10px 15px;
            margin: 0 5px;
            border-radius: 5px;
            min-width: 50px;
        }
        
        /* Content Section */
        .content-section {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 30px;
        }
        
        /* Story Cards */
        .story-card {
            background: white;
            border-radius: 20px;
            padding: 40px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.15);
            position: relative;
            overflow: hidden;
        }
        
        .story-card::before {
            content: attr(data-emoji);
            position: absolute;
            top: -40px;
            right: -40px;
            font-size: 150px;
            opacity: 0.08;
            transform: rotate(-15deg);
        }
        
        .alert-banner {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            animation: alertPulse 1s infinite;
        }
        
        @keyframes alertPulse {
            0%, 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); }
            50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0); }
        }
        
        /* Time Series Visualizer */
        .timeseries-container {
            background: #f8fafc;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            position: relative;
        }
        
        .time-controls {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .time-btn {
            background: white;
            border: 2px solid #e2e8f0;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: 600;
        }
        
        .time-btn:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
        }
        
        .time-btn.active {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border-color: transparent;
        }
        
        /* Pattern Detector */
        .pattern-detector {
            background: linear-gradient(135deg, #1e293b 0%, #334155 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            color: white;
        }
        
        .pattern-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .pattern-card {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .pattern-card:hover {
            background: rgba(255,255,255,0.2);
            transform: translateY(-5px);
        }
        
        .pattern-icon {
            font-size: 2.5em;
            margin-bottom: 10px;
        }
        
        .pattern-name {
            font-weight: bold;
            margin-bottom: 5px;
        }
        
        .pattern-desc {
            font-size: 0.9em;
            opacity: 0.9;
        }
        
        /* Forecast Builder */
        .forecast-builder {
            background: white;
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e2e8f0;
        }
        
        .model-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .model-card {
            background: #f8fafc;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .model-card:hover {
            border-color: #3b82f6;
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.2);
        }
        
        .model-card.selected {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-color: #3b82f6;
        }
        
        .model-icon {
            font-size: 2em;
            margin-bottom: 10px;
        }
        
        .model-name {
            font-weight: bold;
            color: #1e293b;
            margin-bottom: 5px;
        }
        
        .model-accuracy {
            color: #10b981;
            font-weight: 600;
        }
        
        /* Staffing Optimizer */
        .staffing-dashboard {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .hour-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 10px;
            margin-top: 20px;
        }
        
        .hour-block {
            background: white;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .hour-block:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .hour-time {
            font-weight: bold;
            color: #92400e;
            margin-bottom: 5px;
        }
        
        .hour-staff {
            font-size: 1.5em;
            color: #ea580c;
            font-weight: bold;
        }
        
        .hour-demand {
            font-size: 0.9em;
            color: #78350f;
        }
        
        /* Impact Calculator */
        .impact-calculator {
            background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .metric-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .metric-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
            transition: transform 0.3s;
        }
        
        .metric-card:hover {
            transform: scale(1.05);
        }
        
        .metric-value {
            font-size: 2.5em;
            font-weight: bold;
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }
        
        .metric-label {
            color: #059669;
            font-size: 0.95em;
            font-weight: 600;
        }
        
        /* Code Sections */
        .code-section {
            background: #1e293b;
            border-radius: 12px;
            padding: 25px;
            margin: 30px 0;
            position: relative;
            overflow: hidden;
        }
        
        .code-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(148, 163, 184, 0.2);
        }
        
        .code-title {
            color: #94a3b8;
            font-weight: 600;
            font-size: 1.1em;
        }
        
        .run-btn {
            background: linear-gradient(135deg, #10b981 0%, #34d399 100%);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .run-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
        }
        
        .code-block {
            background: #0f172a;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            font-size: 0.95em;
            line-height: 1.6;
            overflow-x: auto;
        }
        
        .code-output {
            background: #0f172a;
            color: #34d399;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            display: none;
        }
        
        /* Black Friday Simulator */
        .simulator-container {
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
            color: white;
        }
        
        .simulator-controls {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .control-item {
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 10px;
        }
        
        .control-label {
            font-weight: 600;
            margin-bottom: 10px;
            display: block;
        }
        
        .slider {
            width: 100%;
            -webkit-appearance: none;
            height: 8px;
            border-radius: 5px;
            background: rgba(255,255,255,0.2);
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            cursor: pointer;
        }
        
        .value-display {
            display: inline-block;
            background: rgba(59, 130, 246, 0.3);
            color: #60a5fa;
            padding: 4px 12px;
            border-radius: 20px;
            font-weight: 600;
            margin-left: 10px;
        }
        
        /* Real-time Monitor */
        .monitor-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-top: 30px;
        }
        
        .monitor-screen {
            background: #0f172a;
            border: 2px solid #3b82f6;
            border-radius: 10px;
            padding: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .monitor-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 2px;
            background: linear-gradient(90deg, transparent, #3b82f6, transparent);
            animation: scan 2s infinite;
        }
        
        @keyframes scan {
            to { left: 100%; }
        }
        
        .monitor-title {
            color: #60a5fa;
            font-weight: bold;
            margin-bottom: 10px;
        }
        
        .monitor-value {
            font-size: 2em;
            color: #34d399;
            font-weight: bold;
        }
        
        /* Achievements */
        .achievement {
            position: fixed;
            top: 100px;
            right: -400px;
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            transition: right 0.5s ease;
            z-index: 2000;
            max-width: 350px;
            border-left: 4px solid #3b82f6;
        }
        
        .achievement.show {
            right: 30px;
        }
        
        /* Quiz Section */
        .quiz-section {
            background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }
        
        .quiz-question {
            font-size: 1.3em;
            color: #1e40af;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .quiz-options {
            display: grid;
            gap: 15px;
        }
        
        .quiz-option {
            background: white;
            border: 2px solid #bfdbfe;
            padding: 15px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .quiz-option:hover {
            border-color: #3b82f6;
            background: #f0f9ff;
            transform: translateX(5px);
        }
        
        .quiz-option.correct {
            background: #10b981;
            color: white;
            border-color: #10b981;
        }
        
        .quiz-option.incorrect {
            background: #ef4444;
            color: white;
            border-color: #ef4444;
        }
        
        /* Action Buttons */
        .action-btn {
            background: linear-gradient(135deg, #3b82f6 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 10px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
        }
        
        .action-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .hero-title { font-size: 2.5em; }
            .hour-grid { grid-template-columns: repeat(3, 1fr); }
            .monitor-grid { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading-screen" id="loadingScreen">
        <div class="clock-loader">
            <div class="clock-hand hour-hand"></div>
            <div class="clock-hand minute-hand"></div>
        </div>
        <h2 style="color: white; margin-top: 40px;">Time Series Magic Loading...</h2>
        <p style="color: rgba(255,255,255,0.8); margin-top: 10px;">Preparing to predict the future</p>
    </div>
    
    <!-- Time Stream Background -->
    <div class="time-stream"></div>
    <div class="time-lines" id="timeLines"></div>
    
    <!-- Navigation -->
    <nav class="nav-header">
        <div class="nav-content">
            <div style="display: flex; align-items: center;">
                <div class="nav-title">
                    <span>‚è∞</span>
                    <span>Module 5: Time Series Forecasting</span>
                </div>
                <div class="time-display" id="currentTime">Nov 24, 10:00 AM</div>
            </div>
            <div class="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
            </div>
            <div>
                <button class="time-btn" onclick="previousChapter()">‚Üê Previous</button>
                <button class="time-btn" onclick="nextChapter()">Next ‚Üí</button>
            </div>
        </div>
    </nav>
    
    <!-- Chapter 1: The Black Friday Crisis -->
    <div class="chapter active" id="chapter1">
        <div class="hero-section">
            <h1 class="hero-title">üõçÔ∏è Black Friday: 24 Hours to Glory or Disaster</h1>
            <div class="countdown-timer">
                <span class="countdown-digit" id="days">3</span> days
                <span class="countdown-digit" id="hours">14</span> hours
                <span class="countdown-digit" id="minutes">27</span> minutes
                until Black Friday
            </div>
            <p style="font-size: 1.3em; margin-top: 20px; opacity: 0.95;">
                Last year's chaos: 500 customers left due to long lines. $8M lost in 24 hours.
            </p>
        </div>
        
        <div class="content-section">
            <!-- The Crisis -->
            <div class="story-card" data-emoji="üò∞">
                <h2 style="font-size: 2em; margin-bottom: 20px; color: #1e293b;">
                    üìû Emergency Board Meeting
                </h2>
                <div style="line-height: 1.8; font-size: 1.1em;">
                    <p>November 21st, 3 days before Black Friday. Sarah's phone rings at 6 AM.</p>
                    
                    <div class="alert-banner">
                        <h3>‚ö†Ô∏è CRITICAL SITUATION</h3>
                        <p><strong>CEO:</strong> "Sarah, last year was a disaster. We had lines wrapping around the building at 6 AM, ran out of doorbusters by 8 AM, and our website crashed at midnight. Competitors captured $8M of our sales."</p>
                        <p style="margin-top: 15px;"><strong>"This year MUST be different. Can you predict hourly demand so we can staff correctly and stock properly?"</strong></p>
                    </div>
                    
                    <p style="margin: 20px 0;">Sarah looks at the data from last year's Black Friday:</p>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin: 20px 0;">
                        <div style="background: #fee2e2; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #991b1b;">Midnight - 4 AM</h4>
                            <p style="color: #7f1d1d;">Website crashed<br>50,000 lost visitors<br>$2M lost sales</p>
                        </div>
                        <div style="background: #fee2e2; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #991b1b;">5 AM - 8 AM</h4>
                            <p style="color: #7f1d1d;">Understaffed by 70%<br>2-hour wait times<br>$3M lost sales</p>
                        </div>
                        <div style="background: #fee2e2; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #991b1b;">2 PM - 5 PM</h4>
                            <p style="color: #7f1d1d;">Overstaffed by 200%<br>Workers standing idle<br>$500K wasted labor</p>
                        </div>
                        <div style="background: #fee2e2; padding: 20px; border-radius: 10px;">
                            <h4 style="color: #991b1b;">6 PM - 11 PM</h4>
                            <p style="color: #7f1d1d;">Surprise second surge<br>Unprepared staff<br>$2.5M lost sales</p>
                        </div>
                    </div>
                    
                    <p style="font-size: 1.2em; color: #1e40af; text-align: center; margin: 30px 0; font-weight: 600;">
                        "If we can predict demand by the hour, we can prevent this disaster!"
                    </p>
                </div>
            </div>
            
            <!-- Interactive Historical Data -->
            <div class="timeseries-container">
                <h3 style="margin-bottom: 20px; color: #1e293b;">üìä Last Year's Black Friday Pattern</h3>
                <div class="time-controls">
                    <button class="time-btn active" onclick="showTimeView(event, 'hourly')">Hourly View</button>
                    <button class="time-btn" onclick="showTimeView(event, 'cumulative')">Cumulative Sales</button>
                    <button class="time-btn" onclick="showTimeView(event, 'comparison')">vs Normal Day</button>
                    <button class="time-btn" onclick="showTimeView(event, 'heatmap')">Heat Map</button>
                </div>
                <div id="historicalChart"></div>
            </div>
            
            <!-- Pattern Recognition -->
            <div class="pattern-detector">
                <h3 style="font-size: 1.5em; margin-bottom: 20px;">üîç Detect Patterns in the Chaos</h3>
                <p style="margin-bottom: 20px; opacity: 0.9;">Click on each pattern to understand Black Friday behavior:</p>
                
                <div class="pattern-grid">
                    <div class="pattern-card" onclick="explainPattern('doorbusters')">
                        <div class="pattern-icon">üö™</div>
                        <div class="pattern-name">Doorbuster Rush</div>
                        <div class="pattern-desc">5-8 AM mega spike</div>
                    </div>
                    <div class="pattern-card" onclick="explainPattern('lunch')">
                        <div class="pattern-icon">üçî</div>
                        <div class="pattern-name">Lunch Lull</div>
                        <div class="pattern-desc">12-2 PM quiet period</div>
                    </div>
                    <div class="pattern-card" onclick="explainPattern('evening')">
                        <div class="pattern-icon">üåô</div>
                        <div class="pattern-name">Evening Surge</div>
                        <div class="pattern-desc">6-9 PM second wave</div>
                    </div>
                    <div class="pattern-card" onclick="explainPattern('online')">
                        <div class="pattern-icon">üíª</div>
                        <div class="pattern-name">Midnight Online</div>
                        <div class="pattern-desc">12-2 AM web rush</div>
                    </div>
                </div>
            </div>
            
            <!-- Quiz -->
            <div class="quiz-section">
                <div class="quiz-question">
                    ü§î Why is hourly prediction crucial for Black Friday?
                </div>
                <div class="quiz-options">
                    <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">
                        To impress the board with fancy charts
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, 'correct')">
                        To optimize staffing levels and prevent customer loss
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">
                        To predict total daily sales only
                    </div>
                    <div class="quiz-option" onclick="checkAnswer(this, 'wrong')">
                        To compete with weather forecasters
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chapter 2: Understanding Time Series -->
    <div class="chapter" id="chapter2">
        <div class="hero-section" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
            <h1 class="hero-title">üìà Time Series: Predicting the Future from the Past</h1>
            <p style="font-size: 1.3em;">Learn how patterns repeat and evolve over time</p>
        </div>
        
        <div class="content-section">
            <!-- Stock Market Analogy -->
            <div class="story-card" data-emoji="üìà">
                <h2 style="font-size: 2em; margin-bottom: 20px;">The Heartbeat Analogy</h2>
                <div style="line-height: 1.8; font-size: 1.1em;">
                    <p>Imagine you're a doctor monitoring a patient's heartbeat. You see:</p>
                    
                    <div style="background: #f0f9ff; padding: 25px; border-radius: 10px; margin: 20px 0;">
                        <ul style="line-height: 2;">
                            <li>üìç <strong>Regular Pattern:</strong> Beat every 0.8 seconds (trend)</li>
                            <li>üìä <strong>Exercise Effect:</strong> Faster during activity (seasonality)</li>
                            <li>üò¥ <strong>Sleep Pattern:</strong> Slower at night (cyclical)</li>
                            <li>‚òï <strong>Coffee Spike:</strong> Temporary increase (irregular)</li>
                        </ul>
                    </div>
                    
                    <p style="font-size: 1.15em; color: #1e40af; margin: 20px 0;">
                        Time series forecasting works the same way! We identify patterns and project them forward.
                    </p>
                </div>
            </div>
            
            <!-- Components Visualizer -->
            <div class="timeseries-container">
                <h3 style="margin-bottom: 20px;">üî¨ Decompose Black Friday Sales</h3>
                <div id="decompositionChart"></div>
                
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px;">
                    <button class="time-btn" onclick="showComponent('trend')">üìà Trend</button>
                    <button class="time-btn" onclick="showComponent('seasonal')">üîÑ Seasonal</button>
                    <button class="time-btn" onclick="showComponent('residual')">üìä Residual</button>
                    <button class="time-btn" onclick="showComponent('all')">üéØ All Combined</button>
                </div>
            </div>
            
            <!-- Interactive Time Series Builder -->
            <div class="forecast-builder">
                <h3 style="margin-bottom: 20px;">üõ†Ô∏è Build Your Own Time Series</h3>
                
                <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px; margin-bottom: 20px;">
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">
                            üìà Trend Strength
                            <span class="value-display" id="trendValue">1.0</span>
                        </label>
                        <input type="range" class="slider" id="trendSlider" min="0" max="2" step="0.1" value="1" onchange="updateTimeSeries()">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">
                            üîÑ Seasonality
                            <span class="value-display" id="seasonValue">1.0</span>
                        </label>
                        <input type="range" class="slider" id="seasonSlider" min="0" max="2" step="0.1" value="1" onchange="updateTimeSeries()">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">
                            üìä Noise Level
                            <span class="value-display" id="noiseValue">0.1</span>
                        </label>
                        <input type="range" class="slider" id="noiseSlider" min="0" max="0.5" step="0.05" value="0.1" onchange="updateTimeSeries()">
                    </div>
                    <div>
                        <label style="display: block; margin-bottom: 10px; font-weight: 600;">
                            üéØ Spike Events
                            <span class="value-display" id="spikeValue">2</span>
                        </label>
                        <input type="range" class="slider" id="spikeSlider" min="0" max="5" value="2" onchange="updateTimeSeries()">
                    </div>
                </div>
                
                <div id="customTimeSeriesChart"></div>
            </div>
        </div>
    </div>
    
    <!-- Chapter 3: ARIMA & Prophet Models -->
    <div class="chapter" id="chapter3">
        <div class="hero-section" style="background: linear-gradient(135deg, #8b5cf6 0%, #6366f1 100%);">
            <h1 class="hero-title">üéØ Building Your Prediction Arsenal</h1>
            <p style="font-size: 1.3em;">Master ARIMA and Prophet for Black Friday forecasting</p>
        </div>
        
        <div class="content-section">
            <!-- Model Selection -->
            <div class="forecast-builder">
                <h3 style="margin-bottom: 20px; font-size: 1.5em;">ü§ñ Choose Your Forecasting Weapon</h3>
                
                <div class="model-selector">
                    <div class="model-card" onclick="selectModel('arima')" id="arimaCard">
                        <div class="model-icon">üìâ</div>
                        <div class="model-name">ARIMA</div>
                        <div style="color: #64748b; margin: 10px 0;">Classic statistical approach</div>
                        <div class="model-accuracy">92% accuracy</div>
                        <div style="font-size: 0.9em; color: #94a3b8; margin-top: 10px;">
                            ‚úÖ Great for stable patterns<br>
                            ‚ùå Struggles with holidays
                        </div>
                    </div>
                    
                    <div class="model-card" onclick="selectModel('prophet')" id="prophetCard">
                        <div class="model-icon">üîÆ</div>
                        <div class="model-name">Prophet (Facebook)</div>
                        <div style="color: #64748b; margin: 10px 0;">Built for business data</div>
                        <div class="model-accuracy">95% accuracy</div>
                        <div style="font-size: 0.9em; color: #94a3b8; margin-top: 10px;">
                            ‚úÖ Handles holidays well<br>
                            ‚úÖ Robust to missing data
                        </div>
                    </div>
                    
                    <div class="model-card" onclick="selectModel('lstm')" id="lstmCard">
                        <div class="model-icon">üß†</div>
                        <div class="model-name">LSTM Neural Network</div>
                        <div style="color: #64748b; margin: 10px 0;">Deep learning approach</div>
                        <div class="model-accuracy">97% accuracy</div>
                        <div style="font-size: 0.9em; color: #94a3b8; margin-top: 10px;">
                            ‚úÖ Captures complex patterns<br>
                            ‚ùå Needs lots of data
                        </div>
                    </div>
                </div>
                
                <button class="action-btn" style="width: 100%; margin-top: 20px;" onclick="trainSelectedModel(event)">
                    üöÄ Train Selected Model
                </button>
            </div>
            
            <!-- ARIMA Explanation -->
            <div class="code-section">
                <div class="code-header">
                    <span class="code-title">üìä ARIMA Model for Black Friday</span>
                    <button class="run-btn" onclick="runARIMA()">‚ñ∂ Run ARIMA</button>
                </div>
                <div class="code-block">
import pandas as pd
import numpy as np
from statsmodels.tsa.arima.model import ARIMA
import warnings
warnings.filterwarnings('ignore')

# Load Black Friday historical data
dates = pd.date_range('2019-11-29', periods=24*4, freq='H')  # 4 years of Black Friday
np.random.seed(42)

# Create realistic Black Friday pattern
hourly_pattern = []
for day in range(4):  # 4 years
    for hour in range(24):
        base = 1000
        
        # Midnight online rush (12 AM - 2 AM)
        if hour in [0, 1]:
            sales = base * 3.5
        # Early morning dormant (2 AM - 5 AM)
        elif 2 <= hour < 5:
            sales = base * 0.3
        # Doorbuster rush (5 AM - 9 AM)
        elif 5 <= hour < 9:
            sales = base * 5.2
        # Morning shopping (9 AM - 12 PM)
        elif 9 <= hour < 12:
            sales = base * 3.8
        # Lunch lull (12 PM - 2 PM)
        elif 12 <= hour < 14:
            sales = base * 1.5
        # Afternoon steady (2 PM - 6 PM)
        elif 14 <= hour < 18:
            sales = base * 2.5
        # Evening surge (6 PM - 9 PM)
        elif 18 <= hour < 21:
            sales = base * 4.2
        # Night wind down (9 PM - 12 AM)
        else:
            sales = base * 2.0
            
        # Add noise and yearly growth
        sales *= (1 + day * 0.1)  # 10% yearly growth
        sales += np.random.normal(0, 200)
        hourly_pattern.append(sales)

sales_data = pd.Series(hourly_pattern, index=dates[:len(hourly_pattern)])

print("üìä BLACK FRIDAY HISTORICAL DATA")
print("="*50)
print(f"Date range: {dates[0].date()} to {dates[-1].date()}")
print(f"Total hours: {len(sales_data)}")
print(f"Average hourly sales: ${sales_data.mean():,.2f}")
print(f"Peak hour sales: ${sales_data.max():,.2f}")

# Fit ARIMA model
print("\nüîß TRAINING ARIMA MODEL")
print("="*50)
print("Finding optimal parameters...")

# ARIMA(p, d, q) - p=autoregressive, d=differencing, q=moving average
model = ARIMA(sales_data[:-24], order=(2, 1, 2))
fitted = model.fit()

print("‚úÖ Model trained successfully!")
print(f"AIC Score: {fitted.aic:.2f}")
print(f"BIC Score: {fitted.bic:.2f}")

# Make predictions for next Black Friday (24 hours)
print("\nüîÆ PREDICTIONS FOR THIS BLACK FRIDAY")
print("="*50)

forecast = fitted.forecast(steps=24)
actuals = sales_data[-24:]

for hour, (pred, actual) in enumerate(zip(forecast, actuals)):
    time = f"{hour:02d}:00"
    accuracy = 100 - abs(pred - actual) / actual * 100
    print(f"{time} - Predicted: ${pred:,.0f} | Actual: ${actual:,.0f} | Accuracy: {accuracy:.1f}%")

# Calculate overall accuracy
mae = np.mean(np.abs(forecast - actuals))
mape = np.mean(np.abs((forecast - actuals) / actuals)) * 100

print("\nüìà MODEL PERFORMANCE")
print("="*50)
print(f"Mean Absolute Error: ${mae:,.2f}")
print(f"Mean Absolute Percentage Error: {mape:.1f}%")
print(f"Overall Accuracy: {100-mape:.1f}%")
                </div>
                <div class="code-output" id="arimaOutput"></div>
            </div>
            
            <!-- Prophet Model -->
            <div class="code-section">
                <div class="code-header">
                    <span class="code-title">üîÆ Prophet Model - Facebook's Gift to Retail</span>
                    <button class="run-btn" onclick="runProphet()">‚ñ∂ Run Prophet</button>
                </div>
                <div class="code-block">
from prophet import Prophet
import pandas as pd
import numpy as np

# Prepare data for Prophet
prophet_data = pd.DataFrame({
    'ds': dates[:len(sales_data)],  # Date column
    'y': sales_data.values          # Target variable
})

# Add Black Friday as a holiday
black_fridays = pd.DataFrame({
    'holiday': 'black_friday',
    'ds': pd.to_datetime(['2019-11-29', '2020-11-27', '2021-11-26', '2022-11-25', '2023-11-24']),
    'lower_window': -1,  # Include Thanksgiving
    'upper_window': 2,   # Include weekend
})

print("üîÆ PROPHET MODEL - BUILT FOR BLACK FRIDAY")
print("="*50)

# Initialize Prophet with custom seasonality
model = Prophet(
    changepoint_prior_scale=0.05,  # Flexibility of trend
    seasonality_prior_scale=10,    # Strength of seasonality
    holidays=black_fridays,        # Include Black Friday effect
    yearly_seasonality=True,
    weekly_seasonality=False,      # Not relevant for Black Friday
    daily_seasonality=True         # Critical for hourly patterns
)

# Add custom regressors for retail patterns
prophet_data['is_doorbuster'] = (prophet_data['ds'].dt.hour >= 5) & (prophet_data['ds'].dt.hour < 9)
prophet_data['is_online_rush'] = (prophet_data['ds'].dt.hour >= 0) & (prophet_data['ds'].dt.hour < 2)
prophet_data['is_evening_surge'] = (prophet_data['ds'].dt.hour >= 18) & (prophet_data['ds'].dt.hour < 21)

model.add_regressor('is_doorbuster')
model.add_regressor('is_online_rush')
model.add_regressor('is_evening_surge')

print("üìä Training on historical Black Friday data...")
model.fit(prophet_data[:-24])

# Make future predictions
future = model.make_future_dataframe(periods=24, freq='H')
future['is_doorbuster'] = (future['ds'].dt.hour >= 5) & (future['ds'].dt.hour < 9)
future['is_online_rush'] = (future['ds'].dt.hour >= 0) & (future['ds'].dt.hour < 2)
future['is_evening_surge'] = (future['ds'].dt.hour >= 18) & (future['ds'].dt.hour < 21)

print("‚úÖ Model trained with special Black Friday patterns!")

# Generate forecast
forecast = model.predict(future)

print("\nüéØ BLACK FRIDAY HOURLY PREDICTIONS")
print("="*50)

predictions = forecast[['ds', 'yhat', 'yhat_lower', 'yhat_upper']].tail(24)

for _, row in predictions.iterrows():
    hour = row['ds'].strftime('%H:00')
    pred = row['yhat']
    lower = row['yhat_lower']
    upper = row['yhat_upper']
    
    # Staffing recommendations based on predictions
    staff_needed = int(pred / 200)  # 1 staff per 200 customers/hour
    
    print(f"{hour} - Sales: ${pred:,.0f} [{lower:,.0f}-{upper:,.0f}] | Staff needed: {staff_needed}")

print("\nüí° KEY INSIGHTS")
print("="*50)
print("‚Ä¢ Peak hour: 6:00 AM - Prepare maximum staff")
print("‚Ä¢ Online surge: 12:00 AM - Ensure website capacity")
print("‚Ä¢ Lunch lull: 12:00 PM - Reduce staff, prepare for afternoon")
print("‚Ä¢ Evening surge: 6:00 PM - Second wave preparation needed")
                </div>
                <div class="code-output" id="prophetOutput"></div>
            </div>
            
            <!-- Model Comparison Visualization -->
            <div id="modelComparisonChart" style="margin: 30px 0;"></div>
        </div>
    </div>
    
    <!-- Chapter 4: Real-Time Optimization -->
    <div class="chapter" id="chapter4">
        <div class="hero-section" style="background: linear-gradient(135deg, #ec4899 0%, #f97316 100%);">
            <h1 class="hero-title">‚ö° Black Friday Command Center</h1>
            <p style="font-size: 1.3em;">Optimize staffing and inventory in real-time</p>
        </div>
        
        <div class="content-section">
            <!-- Staffing Optimizer -->
            <div class="staffing-dashboard">
                <h3 style="color: #92400e; font-size: 1.5em; margin-bottom: 20px;">
                    üë• Optimal Staffing Schedule
                </h3>
                
                <div class="hour-grid" id="staffingGrid">
                    <!-- Will be populated dynamically -->
                </div>
                
                <div style="background: white; padding: 20px; border-radius: 10px; margin-top: 20px;">
                    <h4 style="color: #ea580c; margin-bottom: 15px;">üí∞ Staffing Economics</h4>
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                        <div>
                            <strong>Cost per hour per staff:</strong> $25<br>
                            <strong>Revenue per customer served:</strong> $85<br>
                            <strong>Customers per staff per hour:</strong> 15
                        </div>
                        <div>
                            <strong>Total staff hours needed:</strong> <span id="totalHours">850</span><br>
                            <strong>Total labor cost:</strong> <span id="laborCost">$21,250</span><br>
                            <strong>Expected revenue:</strong> <span id="expectedRevenue">$1,082,500</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Black Friday Simulator -->
            <div class="simulator-container">
                <h3 style="font-size: 1.5em; margin-bottom: 20px;">üéÆ Black Friday Simulator</h3>
                <p style="margin-bottom: 20px; opacity: 0.9;">Adjust parameters and see the impact in real-time:</p>
                
                <div class="simulator-controls">
                    <div class="control-item">
                        <label class="control-label">
                            üíµ Discount Level
                            <span class="value-display" id="discountValue">30%</span>
                        </label>
                        <input type="range" class="slider" id="discountSlider" min="10" max="70" value="30" onchange="updateSimulation()">
                    </div>
                    <div class="control-item">
                        <label class="control-label">
                            üì± Marketing Spend
                            <span class="value-display" id="marketingValue">$50K</span>
                        </label>
                        <input type="range" class="slider" id="marketingSlider" min="10" max="200" value="50" onchange="updateSimulation()">
                    </div>
                    <div class="control-item">
                        <label class="control-label">
                            üö™ Door Capacity
                            <span class="value-display" id="capacityValue">500/hr</span>
                        </label>
                        <input type="range" class="slider" id="capacitySlider" min="200" max="1000" value="500" onchange="updateSimulation()">
                    </div>
                    <div class="control-item">
                        <label class="control-label">
                            üíª Website Servers
                            <span class="value-display" id="serverValue">10</span>
                        </label>
                        <input type="range" class="slider" id="serverSlider" min="5" max="50" value="10" onchange="updateSimulation()">
                    </div>
                </div>
                
                <button class="action-btn" style="width: 100%; margin-top: 20px;" onclick="runSimulation(event)">
                    üöÄ Run Simulation
                </button>
                
                <div class="monitor-grid">
                    <div class="monitor-screen">
                        <div class="monitor-title">Total Revenue</div>
                        <div class="monitor-value" id="simRevenue">$8.2M</div>
                    </div>
                    <div class="monitor-screen">
                        <div class="monitor-title">Customers Served</div>
                        <div class="monitor-value" id="simCustomers">96,470</div>
                    </div>
                    <div class="monitor-screen">
                        <div class="monitor-title">Wait Time</div>
                        <div class="monitor-value" id="simWaitTime">12 min</div>
                    </div>
                </div>
            </div>
            
            <!-- Real-Time Dashboard -->
            <div class="story-card" style="background: #0f172a; color: white;">
                <h3 style="font-size: 1.5em; margin-bottom: 20px;">üìä Black Friday Live Dashboard</h3>
                
                <div id="liveChart" style="height: 400px; margin: 20px 0;"></div>
                
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 15px; margin-top: 20px;">
                    <div style="background: rgba(59, 130, 246, 0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #60a5fa;">$5.2M</div>
                        <div style="color: #94a3b8;">Current Sales</div>
                    </div>
                    <div style="background: rgba(16, 185, 129, 0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #34d399;">2,847</div>
                        <div style="color: #94a3b8;">Customers/Hour</div>
                    </div>
                    <div style="background: rgba(251, 191, 36, 0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #fbbf24;">142</div>
                        <div style="color: #94a3b8;">Staff Active</div>
                    </div>
                    <div style="background: rgba(236, 72, 153, 0.2); padding: 15px; border-radius: 8px; text-align: center;">
                        <div style="font-size: 2em; font-weight: bold; color: #ec4899;">8 min</div>
                        <div style="color: #94a3b8;">Avg Wait Time</div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Chapter 5: Victory & Results -->
    <div class="chapter" id="chapter5">
        <div class="hero-section" style="background: linear-gradient(135deg, #10b981 0%, #059669 100%);">
            <h1 class="hero-title">üèÜ Black Friday Triumph!</h1>
            <p style="font-size: 1.3em;">Record-breaking sales with zero chaos</p>
        </div>
        
        <div class="content-section">
            <!-- Success Story -->
            <div class="story-card" data-emoji="üéâ">
                <h2 style="font-size: 2em; margin-bottom: 20px;">üì∞ Breaking News: MegaMart's Perfect Black Friday</h2>
                
                <div style="line-height: 1.8; font-size: 1.1em;">
                    <p style="font-style: italic; margin-bottom: 20px;">
                        November 25th, 6:00 PM - As Black Friday comes to a close, MegaMart celebrates its most successful shopping day in history.
                    </p>
                    
                    <div style="background: linear-gradient(135deg, #dcfce7 0%, #bbf7d0 100%); padding: 30px; border-radius: 15px; margin: 30px 0;">
                        <h3 style="color: #166534; margin-bottom: 20px;">üìä Black Friday 2024 Results</h3>
                        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 20px;">
                            <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; color: #10b981; font-weight: bold;">$18.7M</div>
                                <div style="color: #059669;">Total Revenue</div>
                                <div style="color: #10b981; margin-top: 5px;">‚Üë 127% vs last year</div>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; color: #10b981; font-weight: bold;">142,000</div>
                                <div style="color: #059669;">Customers Served</div>
                                <div style="color: #10b981; margin-top: 5px;">‚Üë 89% vs last year</div>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; color: #10b981; font-weight: bold;">5 min</div>
                                <div style="color: #059669;">Average Wait Time</div>
                                <div style="color: #10b981; margin-top: 5px;">‚Üì 92% improvement</div>
                            </div>
                            <div style="background: white; padding: 15px; border-radius: 10px; text-align: center;">
                                <div style="font-size: 2em; color: #10b981; font-weight: bold;">4.9‚≠ê</div>
                                <div style="color: #059669;">Customer Rating</div>
                                <div style="color: #10b981; margin-top: 5px;">Best ever!</div>
                            </div>
                        </div>
                    </div>
                    
                    <h3 style="margin: 30px 0 20px;">üéØ How Sarah's Time Series Model Made the Difference</h3>
                    
                    <div style="display: grid; gap: 20px;">
                        <div style="background: #f0f9ff; padding: 20px; border-radius: 10px; border-left: 4px solid #3b82f6;">
                            <h4 style="color: #1e40af; margin-bottom: 10px;">12:00 AM - Midnight Online Rush</h4>
                            <p style="color: #1e3a8a;">Model predicted 3.5x normal traffic. We added 20 extra servers. Zero crashes!</p>
                        </div>
                        <div style="background: #fef3c7; padding: 20px; border-radius: 10px; border-left: 4px solid #f59e0b;">
                            <h4 style="color: #92400e; margin-bottom: 10px;">5:00 AM - Doorbuster Success</h4>
                            <p style="color: #78350f;">Predicted 5,200 customers. Staffed 180 employees. 5-minute average wait!</p>
                        </div>
                        <div style="background: #fce7f3; padding: 20px; border-radius: 10px; border-left: 4px solid #ec4899;">
                            <h4 style="color: #831843; margin-bottom: 10px;">6:00 PM - Evening Surge Handled</h4>
                            <p style="color: #701a75;">Model caught the second wave. Staff ready. No customer left unserved!</p>
                        </div>
                    </div>
                    
                    <div style="background: #1e293b; color: white; padding: 25px; border-radius: 12px; margin: 30px 0;">
                        <h4 style="margin-bottom: 15px;">üì± CEO's Text to Sarah at 9 PM:</h4>
                        <p style="font-size: 1.1em; line-height: 1.8;">
                            "Sarah, INCREDIBLE! Zero complaints, record sales, happy staff. Your hourly predictions were 96% accurate. The board is ecstatic. You've revolutionized how we handle peak days. Bonus coming your way! üéâ"
                        </p>
                    </div>
                </div>
            </div>
            
            <!-- Technical Achievement -->
            <div class="impact-calculator">
                <h3 style="color: #059669; font-size: 1.5em; margin-bottom: 20px;">
                    üìà Model Performance Metrics
                </h3>
                
                <div class="metric-grid">
                    <div class="metric-card">
                        <div class="metric-value">96.2%</div>
                        <div class="metric-label">Prediction Accuracy</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">$312</div>
                        <div class="metric-label">MAE (Hourly)</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">3.8%</div>
                        <div class="metric-label">MAPE</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-value">0.94</div>
                        <div class="metric-label">R¬≤ Score</div>
                    </div>
                </div>
                
                <div style="margin-top: 30px; padding: 20px; background: white; border-radius: 10px;">
                    <h4 style="color: #059669; margin-bottom: 15px;">üí∞ Financial Impact</h4>
                    <ul style="line-height: 2;">
                        <li><strong>Additional Revenue Captured:</strong> $10.5M (vs last year's losses)</li>
                        <li><strong>Labor Cost Optimization:</strong> $487K saved through proper staffing</li>
                        <li><strong>Customer Lifetime Value:</strong> +$3.2M from improved experience</li>
                        <li><strong>Total Impact:</strong> $14.2M improvement</li>
                        <li><strong>ROI on Time Series Implementation:</strong> 2,840%</li>
                    </ul>
                </div>
            </div>
            
            <!-- Certificate -->
            <div class="story-card" style="background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);">
                <div style="text-align: center; padding: 40px; color: white;">
                    <h2 style="font-size: 2.5em; margin-bottom: 30px;">üèÖ Time Series Master Certification</h2>
                    <p style="font-size: 1.3em; margin-bottom: 30px;">
                        This certifies that
                    </p>
                    <div style="font-size: 2em; font-weight: bold; margin: 30px 0; padding: 20px; background: rgba(255,255,255,0.2); border-radius: 10px;">
                        [YOUR NAME]
                    </div>
                    <p style="font-size: 1.2em; margin: 30px 0;">
                        has successfully mastered<br>
                        <strong>Time Series Forecasting for Business</strong>
                    </p>
                    
                    <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin: 40px 0;">
                        <div>
                            <div style="font-size: 2em; font-weight: bold;">ARIMA</div>
                            <div>Mastered</div>
                        </div>
                        <div>
                            <div style="font-size: 2em; font-weight: bold;">Prophet</div>
                            <div>Mastered</div>
                        </div>
                        <div>
                            <div style="font-size: 2em; font-weight: bold;">96%</div>
                            <div>Accuracy</div>
                        </div>
                        <div>
                            <div style="font-size: 2em; font-weight: bold;">$14M</div>
                            <div>Impact</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- What You Learned -->
            <div class="story-card">
                <h2 style="margin-bottom: 20px;">üß† Skills Mastered</h2>
                <div style="display: grid; gap: 15px;">
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">‚úì</div>
                        <div><strong>Time Series Components:</strong> Trend, seasonality, cyclical patterns, and irregular variations</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">‚úì</div>
                        <div><strong>ARIMA Modeling:</strong> AutoRegressive Integrated Moving Average for stationary data</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">‚úì</div>
                        <div><strong>Prophet Framework:</strong> Facebook's tool for business forecasting with holidays</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">‚úì</div>
                        <div><strong>Real-Time Optimization:</strong> Converting predictions to staffing and inventory decisions</div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <div style="width: 40px; height: 40px; background: #10b981; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold;">‚úì</div>
                        <div><strong>Peak Event Management:</strong> Handling extreme variations in demand</div>
                    </div>
                </div>
                
                <div style="background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%); padding: 25px; border-radius: 12px; margin: 30px 0;">
                    <h3 style="color: #3730a3; margin-bottom: 15px;">üöÄ What's Next?</h3>
                    <p style="color: #4338ca; line-height: 1.8;">
                        <strong>Module 6: Deep Learning for Complex Patterns</strong><br>
                        Sarah's next challenge: Can she predict customer behavior across 500 stores simultaneously using neural networks?
                    </p>
                    <button class="action-btn" style="margin-top: 15px;">Start Module 6 ‚Üí</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Achievement Popup -->
    <div class="achievement" id="achievementPopup">
        <div style="display: flex; align-items: center; gap: 15px;">
            <div style="width: 50px; height: 50px; background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 24px;" id="achievementIcon">üèÜ</div>
            <div>
                <div style="font-weight: bold; font-size: 1.1em;" id="achievementTitle">Achievement Unlocked!</div>
                <div style="color: #64748b;" id="achievementDesc">You predicted Black Friday perfectly!</div>
            </div>
        </div>
    </div>
    
    <script>
        // Global variables
        let currentChapter = 1;
        let totalChapters = 5;
        let progress = 0;
        let selectedModel = null;
        let simulationRunning = false;
        
        // Initialize
        window.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                document.getElementById('loadingScreen').classList.add('hidden');
                initializeModule();
            }, 2000);
        });
        
        function initializeModule() {
            // Create time flow lines
            createTimeLines();
            
            // Start countdown timer
            startCountdown();
            
            // Update current time
            updateCurrentTime();
            
            // Initialize charts
            createHistoricalChart();
            
            // Generate staffing grid
            generateStaffingGrid();
            
            // Start live monitoring
            setInterval(updateLiveMetrics, 2000);
        }
        
        // Create flowing time lines effect
        function createTimeLines() {
            const container = document.getElementById('timeLines');
            for (let i = 0; i < 10; i++) {
                const line = document.createElement('div');
                line.className = 'time-line';
                line.style.top = (i * 10) + '%';
                line.style.animationDelay = (i * 0.3) + 's';
                container.appendChild(line);
            }
        }
        
        // Countdown timer
        function getBlackFridayDate(year) {
            // Thanksgiving = 4th Thursday of November; Black Friday = next day.
            const novemberFirst = new Date(year, 10, 1); // Month is 0-indexed; 10 = November
            const firstDay = novemberFirst.getDay(); // 0=Sun, 4=Thu
            const daysUntilThursday = (4 - firstDay + 7) % 7;
            const firstThursdayDate = 1 + daysUntilThursday;
            const fourthThursdayDate = firstThursdayDate + 21;
            const thanksgiving = new Date(year, 10, fourthThursdayDate);
            return new Date(thanksgiving.getFullYear(), thanksgiving.getMonth(), thanksgiving.getDate() + 1);
        }

        function getNextBlackFriday(now) {
            const currentYear = now.getFullYear();
            let bf = getBlackFridayDate(currentYear);
            if (bf.getTime() <= now.getTime()) {
                bf = getBlackFridayDate(currentYear + 1);
            }
            return bf;
        }

        function startCountdown() {
            const tick = () => {
                const now = new Date();
                const blackFriday = getNextBlackFriday(now);
                let diff = blackFriday.getTime() - now.getTime();
                if (diff < 0) diff = 0;

                const days = Math.floor(diff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((diff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((diff % (1000 * 60 * 60)) / (1000 * 60));
                
                if (document.getElementById('days')) {
                    document.getElementById('days').textContent = days;
                    document.getElementById('hours').textContent = hours;
                    document.getElementById('minutes').textContent = minutes;
                }
            };

            tick();
            setInterval(tick, 60000);
        }
        
        // Update current time display
        function updateCurrentTime() {
            setInterval(() => {
                const now = new Date();
                const timeStr = now.toLocaleString('en-US', { 
                    month: 'short', 
                    day: 'numeric', 
                    hour: 'numeric', 
                    minute: '2-digit',
                    hour12: true 
                });
                if (document.getElementById('currentTime')) {
                    document.getElementById('currentTime').textContent = timeStr;
                }
            }, 1000);
        }
        
        // Create historical chart
        function createHistoricalChart() {
            // Generate hourly data for last year's Black Friday
            const hours = Array.from({length: 24}, (_, i) => `${i}:00`);
            const sales = [
                3500, 3200, 1200, 500, 800, 5200, 5500, 5800, 5200,
                4500, 3800, 3200, 1500, 1800, 2500, 2800, 3200, 3800,
                4200, 4500, 3800, 3200, 2500, 2000
            ];
            
            const trace = {
                x: hours,
                y: sales,
                type: 'scatter',
                mode: 'lines+markers',
                name: 'Customers/Hour',
                line: {
                    color: '#3b82f6',
                    width: 3
                },
                marker: {
                    size: 8,
                    color: '#3b82f6'
                }
            };
            
            const layout = {
                title: 'Last Year\'s Black Friday - Hourly Customer Count',
                xaxis: { title: 'Hour of Day' },
                yaxis: { title: 'Customers' },
                showlegend: false,
                height: 400,
                paper_bgcolor: 'rgba(0,0,0,0)',
                plot_bgcolor: 'rgba(248, 250, 252, 1)',
                font: { color: '#1e293b' }
            };
            
            Plotly.newPlot('historicalChart', [trace], layout);
        }
        
        // Show different time views
        function showTimeView(evt, view) {
            // Update button states
            document.querySelectorAll('.time-btn').forEach(btn => btn.classList.remove('active'));
            if (evt && evt.target) {
                evt.target.classList.add('active');
            }
            
            // Update chart based on view
            // This would show different visualizations
        }
        
        // Explain patterns
        function explainPattern(pattern) {
            const explanations = {
                doorbusters: 'Doorbuster deals attract massive crowds from 5-8 AM. Requires 3x normal staff.',
                lunch: 'Customers take lunch breaks. Opportunity to restock and prepare for afternoon.',
                evening: 'After-work shoppers create second surge. Often overlooked but very profitable.',
                online: 'Midnight online shoppers crash websites. Need server capacity planning.'
            };
            
            alert(explanations[pattern]);
            showAchievement('üîç', 'Pattern Detective', 'You discovered a Black Friday pattern!');
        }
        
        // Check quiz answer
        function checkAnswer(element, result) {
            const options = element.parentElement.querySelectorAll('.quiz-option');
            options.forEach(opt => opt.style.pointerEvents = 'none');
            
            if (result === 'correct') {
                element.classList.add('correct');
                showAchievement('üéØ', 'Quick Learner', 'Correct answer!');
                updateProgress(10);
            } else {
                element.classList.add('incorrect');
            }
        }
        
        // Show time series component
        function showComponent(component) {
            // This would update the decomposition chart
            showAchievement('üìä', 'Component Master', `You understand ${component}!`);
        }
        
        // Update custom time series
        function updateTimeSeries() {
            document.getElementById('trendValue').textContent = document.getElementById('trendSlider').value;
            document.getElementById('seasonValue').textContent = document.getElementById('seasonSlider').value;
            document.getElementById('noiseValue').textContent = document.getElementById('noiseSlider').value;
            document.getElementById('spikeValue').textContent = document.getElementById('spikeSlider').value;
            
            // Generate and plot custom time series
            // This would create a new visualization
        }
        
        // Select forecasting model
        function selectModel(model) {
            document.querySelectorAll('.model-card').forEach(card => card.classList.remove('selected'));
            document.getElementById(model + 'Card').classList.add('selected');
            selectedModel = model;
            showAchievement('ü§ñ', 'Model Selector', `Selected ${model.toUpperCase()} model!`);
        }
        
        // Train selected model
        function trainSelectedModel(evt) {
            if (!selectedModel) {
                alert('Please select a model first!');
                return;
            }
            
            const button = (evt && evt.target) ? evt.target : null;
            if (!button) return;
            button.textContent = '‚è≥ Training ' + selectedModel.toUpperCase() + '...';
            button.disabled = true;
            
            setTimeout(() => {
                button.textContent = '‚úÖ Model Trained Successfully!';
                showAchievement('üß†', 'Model Trainer', 'Successfully trained ' + selectedModel.toUpperCase());
                updateProgress(25);
            }, 3000);
        }
        
        // Run ARIMA code
        function runARIMA() {
            const output = document.getElementById('arimaOutput');
            output.style.display = 'block';
            output.innerHTML = `üìä BLACK FRIDAY HISTORICAL DATA
==================================================
Date range: 2019-11-29 to 2023-11-24
Total hours: 96
Average hourly sales: $2,847.32
Peak hour sales: $5,824.18

üîß TRAINING ARIMA MODEL
==================================================
Finding optimal parameters...
‚úÖ Model trained successfully!
AIC Score: 1247.82
BIC Score: 1263.45

üîÆ PREDICTIONS FOR THIS BLACK FRIDAY
==================================================
00:00 - Predicted: $3,487 | Actual: $3,521 | Accuracy: 99.0%
01:00 - Predicted: $3,234 | Actual: $3,189 | Accuracy: 98.6%
02:00 - Predicted: $1,245 | Actual: $1,198 | Accuracy: 96.1%
...
23:00 - Predicted: $2,012 | Actual: $1,987 | Accuracy: 98.7%

üìà MODEL PERFORMANCE
==================================================
Mean Absolute Error: $142.38
Mean Absolute Percentage Error: 3.8%
Overall Accuracy: 96.2%`;
            
            showAchievement('üìä', 'ARIMA Expert', 'Mastered ARIMA forecasting!');
        }
        
        // Run Prophet code
        function runProphet() {
            const output = document.getElementById('prophetOutput');
            output.style.display = 'block';
            output.innerHTML = `üîÆ PROPHET MODEL - BUILT FOR BLACK FRIDAY
==================================================
üìä Training on historical Black Friday data...
‚úÖ Model trained with special Black Friday patterns!

üéØ BLACK FRIDAY HOURLY PREDICTIONS
==================================================
00:00 - Sales: $3,502 [3,287-3,717] | Staff needed: 17
01:00 - Sales: $3,198 [2,983-3,413] | Staff needed: 16
05:00 - Sales: $5,234 [5,019-5,449] | Staff needed: 26
06:00 - Sales: $5,512 [5,297-5,727] | Staff needed: 27
...

üí° KEY INSIGHTS
==================================================
‚Ä¢ Peak hour: 6:00 AM - Prepare maximum staff
‚Ä¢ Online surge: 12:00 AM - Ensure website capacity
‚Ä¢ Lunch lull: 12:00 PM - Reduce staff, prepare for afternoon
‚Ä¢ Evening surge: 6:00 PM - Second wave preparation needed`;
            
            showAchievement('üîÆ', 'Prophet Master', 'Mastered Prophet forecasting!');
        }
        
        // Generate staffing grid
        function generateStaffingGrid() {
            const grid = document.getElementById('staffingGrid');
            if (!grid) return;
            
            const schedule = [
                {time: '12 AM', staff: 25, demand: 'High'},
                {time: '2 AM', staff: 8, demand: 'Low'},
                {time: '5 AM', staff: 85, demand: 'Peak'},
                {time: '8 AM', staff: 75, demand: 'High'},
                {time: '12 PM', staff: 35, demand: 'Medium'},
                {time: '6 PM', staff: 65, demand: 'High'}
            ];
            
            grid.innerHTML = schedule.map(slot => `
                <div class="hour-block">
                    <div class="hour-time">${slot.time}</div>
                    <div class="hour-staff">${slot.staff}</div>
                    <div class="hour-demand">${slot.demand}</div>
                </div>
            `).join('');
        }
        
        // Update simulation
        function updateSimulation() {
            document.getElementById('discountValue').textContent = document.getElementById('discountSlider').value + '%';
            document.getElementById('marketingValue').textContent = '$' + document.getElementById('marketingSlider').value + 'K';
            document.getElementById('capacityValue').textContent = document.getElementById('capacitySlider').value + '/hr';
            document.getElementById('serverValue').textContent = document.getElementById('serverSlider').value;
        }
        
        // Run simulation
        function runSimulation(evt) {
            if (simulationRunning) return;
            simulationRunning = true;
            
            const button = (evt && evt.target) ? evt.target : null;
            if (!button) return;
            button.textContent = '‚è≥ Simulating Black Friday...';
            
            setTimeout(() => {
                // Update results based on parameters
                const discount = document.getElementById('discountSlider').value;
                const marketing = document.getElementById('marketingSlider').value;
                const capacity = document.getElementById('capacitySlider').value;
                const servers = document.getElementById('serverSlider').value;
                
                const revenue = (8.2 + discount * 0.1 + marketing * 0.01).toFixed(1);
                const customers = Math.round(96470 * (1 + discount / 100));
                const waitTime = Math.max(5, Math.round(20 - capacity / 50));
                
                document.getElementById('simRevenue').textContent = '$' + revenue + 'M';
                document.getElementById('simCustomers').textContent = customers.toLocaleString();
                document.getElementById('simWaitTime').textContent = waitTime + ' min';
                
                button.textContent = '‚úÖ Simulation Complete!';
                simulationRunning = false;
                
                showAchievement('üéÆ', 'Simulator Pro', 'Optimized Black Friday parameters!');
                updateProgress(20);
            }, 3000);
        }
        
        // Update live metrics
        function updateLiveMetrics() {
            // Simulate live data updates
            if (document.getElementById('simCustomers')) {
                const current = parseInt(document.getElementById('simCustomers').textContent.replace(/,/g, ''));
                const change = Math.round((Math.random() - 0.3) * 100);
                document.getElementById('simCustomers').textContent = (current + change).toLocaleString();
            }
        }
        
        // Navigation
        function nextChapter() {
            if (currentChapter < totalChapters) {
                currentChapter++;
                updateChapter();
            }
        }
        
        function previousChapter() {
            if (currentChapter > 1) {
                currentChapter--;
                updateChapter();
            }
        }
        
        function updateChapter() {
            document.querySelectorAll('.chapter').forEach(ch => {
                ch.classList.remove('active');
            });
            document.getElementById('chapter' + currentChapter).classList.add('active');
            window.scrollTo(0, 0);
            updateProgress(currentChapter * 20);
        }
        
        // Progress tracking
        function updateProgress(amount) {
            progress = Math.min(100, progress + amount);
            document.getElementById('progressBar').style.width = progress + '%';
            
            if (progress === 100 && currentChapter === totalChapters) {
                showAchievement('üéì', 'Time Series Master!', 'You conquered Black Friday chaos!');
            }
        }
        
        // Achievement system
        function showAchievement(icon, title, description) {
            const popup = document.getElementById('achievementPopup');
            document.getElementById('achievementIcon').textContent = icon;
            document.getElementById('achievementTitle').textContent = title;
            document.getElementById('achievementDesc').textContent = description;
            
            popup.classList.add('show');
            
            setTimeout(() => {
                popup.classList.remove('show');
            }, 3000);
        }
    </script>
</body>
</html>